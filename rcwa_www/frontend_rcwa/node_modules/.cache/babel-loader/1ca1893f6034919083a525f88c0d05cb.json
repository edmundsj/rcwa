{"ast":null,"code":"var _jsxFileName = \"/home/foglet15/Code/Python/rcwa/rcwa_www/frontend_rcwa/src/components/ControlColumn.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport LatticeVectorsControl from \"./LatticeVectorsControl\";\nimport LayerCard from \"./LayerCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ControlColumn() {\n  _s();\n\n  const [layers, setLayers] = useState([{\n    name: \"Reflection Layer\",\n    hasCrystal: false,\n    ur: 1,\n    er: 1,\n    thickness: 0.0,\n    n: 0.0,\n    is3D: false,\n    material: \"\",\n    latticeVectors: []\n  }, {\n    name: \"Transmission Layer\",\n    hasCrystal: false,\n    ur: 1,\n    er: 1,\n    thickness: 0.0,\n    is3D: false,\n    n: 0.0,\n    material: \"\",\n    latticeVectors: []\n  }]);\n\n  const addLayer = () => {\n    var newLayer = {\n      name: `Layer ${layers.length - 1}`,\n      hasCrystal: false,\n      ur: 1,\n      er: 1,\n      thickness: 0.0,\n      n: 0.0,\n      material: \"\",\n      is3D: true,\n      latticeVectors: []\n    };\n    var newLayers = [...layers];\n    newLayers.splice(layers.length - 1, 0, newLayer);\n    setLayers(newLayers);\n  };\n\n  const removeLayer = () => {\n    if (layers.length === 2) {\n      return;\n    }\n\n    layers.splice(layers.length - 2, 1);\n    setLayers([...layers]);\n  };\n\n  const updateLayerProp = (idx, prop, newValue) => {\n    console.log(`called to update layer ${idx}, prop ${prop} to value ${newValue}`);\n    layers[idx][prop] = newValue;\n\n    switch (prop) {\n      case \"er\":\n        layers[idx].n = Math.sqrt(newValue * layers[idx].ur);\n        break;\n\n      case \"ur\":\n        layers[idx].n = Math.sqrt(newValue * layers[idx].er);\n        break;\n\n      case \"n\":\n        layers[idx].er = newValue * newValue;\n        layers[idx].ur = 1;\n        break;\n    }\n\n    setLayers([...layers]);\n  };\n\n  var addLatticeVector = idx => {\n    var layer = layers[idx];\n\n    if (layer.latticeVectors.length >= 3) {\n      return;\n    }\n\n    let newVs = [...layer.latticeVectors];\n    newVs.push([0, 0, 0]);\n    layer.latticeVectors = newVs;\n    layers[idx] = layer;\n    setLayers([...layers]);\n  };\n\n  var set3Dimensions = (status, idx) => {\n    var layer = layers[idx];\n    layer.is3D = status;\n    layers[idx] = layer;\n    setLayers([...layers]);\n  };\n\n  var removeLatticeVector = idx => {\n    var layer = layers[idx];\n\n    if (layer.latticeVectors.length <= 0) {\n      return;\n    }\n\n    let newVs = [...layer.latticeVectors];\n    newVs.pop();\n    layer.latticeVectors = newVs;\n    setLayers([...layers]);\n  };\n\n  var modifyVector = (vectorIdx, component, event, idx) => {\n    var layer = layers[idx];\n    layer.latticeVectors[vectorIdx][component] = event.target.value;\n    layers[idx] = layer;\n    setLayers([...layers]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"controlColumn\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-red-500\",\n      children: \"Source Control\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"pink\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"flex-end\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"controlBtns\",\n        onClick: addLayer,\n        children: \"Add Layer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"controlBtns\",\n        onClick: removeLayer,\n        children: \"Remove Layer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"layerControl\",\n      children: layers.map((elem, idx) => /*#__PURE__*/_jsxDEV(LayerCard, {\n        layer: elem,\n        set3Dimensions: set3Dimensions,\n        addLatticeVector: addLatticeVector,\n        removeLatticeVector: removeLatticeVector,\n        modifyVector: modifyVector,\n        updateLayerProp: updateLayerProp,\n        isOnEnds: idx == 0 || idx == layers.length - 1,\n        idx: idx\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 44\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ControlColumn, \"G5fO//oeWWt1GGtryhjHYCrVQQg=\");\n\n_c = ControlColumn;\n\nvar _c;\n\n$RefreshReg$(_c, \"ControlColumn\");","map":{"version":3,"names":["useState","LatticeVectorsControl","LayerCard","ControlColumn","layers","setLayers","name","hasCrystal","ur","er","thickness","n","is3D","material","latticeVectors","addLayer","newLayer","length","newLayers","splice","removeLayer","updateLayerProp","idx","prop","newValue","console","log","Math","sqrt","addLatticeVector","layer","newVs","push","set3Dimensions","status","removeLatticeVector","pop","modifyVector","vectorIdx","component","event","target","value","background","display","flexDirection","alignItems","map","elem"],"sources":["/home/foglet15/Code/Python/rcwa/rcwa_www/frontend_rcwa/src/components/ControlColumn.js"],"sourcesContent":["import { useState } from \"react\"\nimport LatticeVectorsControl from \"./LatticeVectorsControl\";\nimport LayerCard from \"./LayerCard\";\n\nexport default function ControlColumn(){\n\n    const [layers, setLayers] = useState([\n        {\n            name: \"Reflection Layer\",\n            hasCrystal: false,\n            ur: 1,\n            er: 1,\n            thickness: 0.0,\n            n: 0.0,\n            is3D: false,\n            material: \"\",\n            latticeVectors:[]\n        },\n        {\n            name: \"Transmission Layer\",\n            hasCrystal: false,\n            ur: 1,\n            er: 1,\n            thickness: 0.0,\n            is3D: false,\n            n: 0.0,\n            material: \"\",\n            latticeVectors:[]\n        }\n    ])\n\n    const addLayer = () => {\n        var newLayer = {\n            name: `Layer ${layers.length-1}`,\n            hasCrystal: false,\n            ur: 1,\n            er: 1,\n            thickness: 0.0,\n            n: 0.0,\n            material: \"\",\n            is3D: true,\n            latticeVectors: []\n        }\n        var newLayers = [...layers]\n        newLayers.splice(layers.length-1, 0, newLayer)\n        setLayers(newLayers)\n    }\n\n    const removeLayer = () => {\n        if(layers.length === 2){\n            return;\n        }\n        layers.splice(layers.length-2,1)\n        setLayers([...layers])\n    }\n\n    const updateLayerProp = (idx, prop, newValue) => {\n        console.log(`called to update layer ${idx}, prop ${prop} to value ${newValue}`)\n        layers[idx][prop] = newValue\n        switch(prop){\n            case \"er\":\n                layers[idx].n = Math.sqrt(newValue*layers[idx].ur)\n                break;\n            case \"ur\":\n                layers[idx].n = Math.sqrt(newValue*layers[idx].er)\n                break;\n            case \"n\":\n                layers[idx].er = newValue*newValue\n                layers[idx].ur = 1\n                break;\n        }\n        setLayers([...layers])\n    }    \n\n    var addLatticeVector = (idx) => {\n        var layer = layers[idx]\n        if (layer.latticeVectors.length >= 3){\n            return\n        }\n        let newVs = [...layer.latticeVectors]\n        newVs.push([0,0,0])\n        layer.latticeVectors = newVs\n        layers[idx] = layer\n        setLayers([...layers])\n    }\n\n    var set3Dimensions = (status, idx) => {\n        var layer = layers[idx]\n        layer.is3D = status\n        layers[idx] = layer\n        setLayers([...layers])\n    }\n\n    var removeLatticeVector = (idx) => {\n        var layer = layers[idx]\n        if(layer.latticeVectors.length <= 0) {\n            return\n        }\n        let newVs = [...layer.latticeVectors]\n        newVs.pop()\n        layer.latticeVectors = newVs\n        setLayers([...layers])\n    }\n\n    var modifyVector = (vectorIdx, component, event, idx) => {\n        var layer = layers[idx]\n        layer.latticeVectors[vectorIdx][component] = event.target.value\n        layers[idx] = layer\n        setLayers([...layers])\n    }\n\n    return(\n        <div className=\"controlColumn\">\n            <div className=\"border-red-500\">\n                Source Control\n            </div>\n            <div style={{background:\"pink\", display:\"flex\", flexDirection:\"row\", alignItems:\"flex-end\"}}>\n                    <button className=\"controlBtns\" onClick={addLayer}>Add Layer</button>\n                    <button className=\"controlBtns\" onClick={removeLayer}>Remove Layer</button>\n            </div>\n            <div className=\"layerControl\">\n                {layers.map((elem, idx) => <LayerCard layer={elem} \n                    key = {idx}\n                    set3Dimensions={set3Dimensions}\n                    addLatticeVector={addLatticeVector}\n                    removeLatticeVector={removeLatticeVector}\n                    modifyVector={modifyVector}\n                    updateLayerProp={updateLayerProp}\n                    isOnEnds={idx == 0 || idx == layers.length-1} \n                    idx={idx}/>)}\n            </div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}