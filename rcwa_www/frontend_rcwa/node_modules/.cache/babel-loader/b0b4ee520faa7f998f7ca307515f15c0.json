{"ast":null,"code":"var _jsxFileName = \"/home/foglet15/Code/Python/rcwa/rcwa_www/frontend_rcwa/src/components/ControlColumn.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport LatticeVectorsControl from \"./LatticeVectorsControl\";\nimport LayerCard from \"./LayerCard\";\nimport SourceControl from \"./SourceControl\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ControlColumn() {\n  _s();\n\n  const [layers, setLayers] = useState([{\n    name: \"Reflection Layer\",\n    hasCrystal: false,\n    ur: 1,\n    er: 1,\n    thickness: 0.0,\n    n: 0.0,\n    is3D: false,\n    material: \"\",\n    latticeVectors: []\n  }, {\n    name: \"Transmission Layer\",\n    hasCrystal: false,\n    ur: 1,\n    er: 1,\n    thickness: 0.0,\n    is3D: false,\n    n: 0.0,\n    material: \"\",\n    latticeVectors: []\n  }]);\n  const [source, setSource] = useState({\n    centerWavelength: 500,\n    pTE: 1,\n    pTM: 1,\n    theta: 0,\n    phi: 0,\n    wavelengths: \"\",\n    layerLocIdx: 0\n  });\n\n  const updateSource = (prop, newValue) => {\n    source[prop] = newValue;\n    setSource({ ...source\n    });\n  };\n\n  const addLayer = () => {\n    var newLayer = {\n      name: `Layer ${layers.length - 1}`,\n      hasCrystal: false,\n      ur: 1,\n      er: 1,\n      thickness: 0.0,\n      n: 0.0,\n      material: \"\",\n      is3D: true,\n      latticeVectors: []\n    };\n    var newLayers = [...layers];\n    newLayers.splice(layers.length - 1, 0, newLayer);\n    setLayers(newLayers);\n  };\n\n  const removeLayer = () => {\n    if (layers.length === 2) {\n      return;\n    }\n\n    layers.splice(layers.length - 2, 1);\n    setLayers([...layers]);\n  };\n\n  const updateLayerProp = (idx, prop, newValue) => {\n    console.log(`called to update layer ${idx}, prop ${prop} to value ${newValue}`);\n    layers[idx][prop] = newValue;\n\n    switch (prop) {\n      case \"er\":\n        layers[idx].n = Math.sqrt(newValue * layers[idx].ur);\n        break;\n\n      case \"ur\":\n        layers[idx].n = Math.sqrt(newValue * layers[idx].er);\n        break;\n\n      case \"n\":\n        layers[idx].er = newValue * newValue;\n        layers[idx].ur = 1;\n        break;\n    }\n\n    setLayers([...layers]);\n  };\n\n  var addLatticeVector = idx => {\n    var layer = layers[idx];\n\n    if (layer.latticeVectors.length >= 3) {\n      return;\n    }\n\n    let newVs = [...layer.latticeVectors];\n    newVs.push([0, 0, 0]);\n    layer.latticeVectors = newVs;\n    layers[idx] = layer;\n    setLayers([...layers]);\n  };\n\n  var set3Dimensions = (status, idx) => {\n    var layer = layers[idx];\n    layer.is3D = status;\n    layers[idx] = layer;\n    setLayers([...layers]);\n  };\n\n  var removeLatticeVector = idx => {\n    var layer = layers[idx];\n\n    if (layer.latticeVectors.length <= 0) {\n      return;\n    }\n\n    let newVs = [...layer.latticeVectors];\n    newVs.pop();\n    layer.latticeVectors = newVs;\n    setLayers([...layers]);\n  };\n\n  var modifyVector = (vectorIdx, component, event, idx) => {\n    var layer = layers[idx];\n    layer.latticeVectors[vectorIdx][component] = event.target.value;\n    layers[idx] = layer;\n    setLayers([...layers]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"controlColumn\",\n    children: [/*#__PURE__*/_jsxDEV(SourceControl, {\n      layers: layers\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"pink\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"flex-end\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"controlBtns\",\n        onClick: addLayer,\n        children: \"Add Layer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"controlBtns\",\n        onClick: removeLayer,\n        children: \"Remove Layer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"layerControl\",\n      children: layers.map((elem, idx) => /*#__PURE__*/_jsxDEV(LayerCard, {\n        layer: elem,\n        set3Dimensions: set3Dimensions,\n        addLatticeVector: addLatticeVector,\n        removeLatticeVector: removeLatticeVector,\n        modifyVector: modifyVector,\n        updateLayerProp: updateLayerProp,\n        isOnEnds: idx == 0 || idx == layers.length - 1,\n        idx: idx\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 44\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ControlColumn, \"H+OrFI9yEOiBylV/IhKhF97FmLA=\");\n\n_c = ControlColumn;\n\nvar _c;\n\n$RefreshReg$(_c, \"ControlColumn\");","map":{"version":3,"names":["useState","LatticeVectorsControl","LayerCard","SourceControl","ControlColumn","layers","setLayers","name","hasCrystal","ur","er","thickness","n","is3D","material","latticeVectors","source","setSource","centerWavelength","pTE","pTM","theta","phi","wavelengths","layerLocIdx","updateSource","prop","newValue","addLayer","newLayer","length","newLayers","splice","removeLayer","updateLayerProp","idx","console","log","Math","sqrt","addLatticeVector","layer","newVs","push","set3Dimensions","status","removeLatticeVector","pop","modifyVector","vectorIdx","component","event","target","value","background","display","flexDirection","alignItems","map","elem"],"sources":["/home/foglet15/Code/Python/rcwa/rcwa_www/frontend_rcwa/src/components/ControlColumn.js"],"sourcesContent":["import { useState } from \"react\"\nimport LatticeVectorsControl from \"./LatticeVectorsControl\";\nimport LayerCard from \"./LayerCard\";\nimport SourceControl from \"./SourceControl\";\n\nexport default function ControlColumn(){\n\n    const [layers, setLayers] = useState([\n        {\n            name: \"Reflection Layer\",\n            hasCrystal: false,\n            ur: 1,\n            er: 1,\n            thickness: 0.0,\n            n: 0.0,\n            is3D: false,\n            material: \"\",\n            latticeVectors:[]\n        },\n        {\n            name: \"Transmission Layer\",\n            hasCrystal: false,\n            ur: 1,\n            er: 1,\n            thickness: 0.0,\n            is3D: false,\n            n: 0.0,\n            material: \"\",\n            latticeVectors:[]\n        }\n    ])\n\n    const [source, setSource] = useState({\n        centerWavelength: 500,\n        pTE: 1,\n        pTM: 1,\n        theta: 0,\n        phi: 0,\n        wavelengths: \"\",\n        layerLocIdx: 0,\n    })\n\n    const updateSource = (prop, newValue) => {\n        source[prop] = newValue\n        setSource({...source})\n    }\n\n    const addLayer = () => {\n        var newLayer = {\n            name: `Layer ${layers.length-1}`,\n            hasCrystal: false,\n            ur: 1,\n            er: 1,\n            thickness: 0.0,\n            n: 0.0,\n            material: \"\",\n            is3D: true,\n            latticeVectors: []\n        }\n        var newLayers = [...layers]\n        newLayers.splice(layers.length-1, 0, newLayer)\n        setLayers(newLayers)\n    }\n\n    const removeLayer = () => {\n        if(layers.length === 2){\n            return;\n        }\n        layers.splice(layers.length-2,1)\n        setLayers([...layers])\n    }\n\n    const updateLayerProp = (idx, prop, newValue) => {\n        console.log(`called to update layer ${idx}, prop ${prop} to value ${newValue}`)\n        layers[idx][prop] = newValue\n        switch(prop){\n            case \"er\":\n                layers[idx].n = Math.sqrt(newValue*layers[idx].ur)\n                break;\n            case \"ur\":\n                layers[idx].n = Math.sqrt(newValue*layers[idx].er)\n                break;\n            case \"n\":\n                layers[idx].er = newValue*newValue\n                layers[idx].ur = 1\n                break;\n        }\n        setLayers([...layers])\n    }    \n\n    var addLatticeVector = (idx) => {\n        var layer = layers[idx]\n        if (layer.latticeVectors.length >= 3){\n            return\n        }\n        let newVs = [...layer.latticeVectors]\n        newVs.push([0,0,0])\n        layer.latticeVectors = newVs\n        layers[idx] = layer\n        setLayers([...layers])\n    }\n\n    var set3Dimensions = (status, idx) => {\n        var layer = layers[idx]\n        layer.is3D = status\n        layers[idx] = layer\n        setLayers([...layers])\n    }\n\n    var removeLatticeVector = (idx) => {\n        var layer = layers[idx]\n        if(layer.latticeVectors.length <= 0) {\n            return\n        }\n        let newVs = [...layer.latticeVectors]\n        newVs.pop()\n        layer.latticeVectors = newVs\n        setLayers([...layers])\n    }\n\n    var modifyVector = (vectorIdx, component, event, idx) => {\n        var layer = layers[idx]\n        layer.latticeVectors[vectorIdx][component] = event.target.value\n        layers[idx] = layer\n        setLayers([...layers])\n    }\n\n    return(\n        <div className=\"controlColumn\">\n            <SourceControl layers={layers}/>\n            <div style={{background:\"pink\", display:\"flex\", flexDirection:\"row\", alignItems:\"flex-end\"}}>\n                    <button className=\"controlBtns\" onClick={addLayer}>Add Layer</button>\n                    <button className=\"controlBtns\" onClick={removeLayer}>Remove Layer</button>\n            </div>\n            <div className=\"layerControl\">\n                {layers.map((elem, idx) => <LayerCard layer={elem} \n                    key = {idx}\n                    set3Dimensions={set3Dimensions}\n                    addLatticeVector={addLatticeVector}\n                    removeLatticeVector={removeLatticeVector}\n                    modifyVector={modifyVector}\n                    updateLayerProp={updateLayerProp}\n                    isOnEnds={idx == 0 || idx == layers.length-1} \n                    idx={idx}/>)}\n            </div>\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}